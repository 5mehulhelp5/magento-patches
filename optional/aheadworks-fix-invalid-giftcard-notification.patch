Fix for issue "Gift Card code XXX is not valid anymore and has been canceled".
Patch prepared by aheadworks.

--- a/Plugin/Model/Quote/QuoteRepository/SaveHandlerPlugin.php
+++ b/Plugin/Model/Quote/QuoteRepository/SaveHandlerPlugin.php
@@ -25,6 +25,11 @@ class SaveHandlerPlugin
      */
     private $entityManager;
 
+    /**
+     * @var bool
+     */
+    protected $executedFlag;
+
     /**
      * @param EntityManager $entityManager
      */
@@ -32,6 +37,7 @@ class SaveHandlerPlugin
         EntityManager $entityManager
     ) {
         $this->entityManager = $entityManager;
+        $this->executedFlag = false;
     }
 
     /**
@@ -45,7 +51,10 @@ class SaveHandlerPlugin
      */
     public function afterSave($subject, $quote)
     {
-        return $this->processQuoteGiftcards($quote);
+        if (!$this->executedFlag) {
+            $this->executedFlag = true;
+            return $this->processQuoteGiftcards($quote);
+        }
     }
 
     /**
@@ -60,7 +69,10 @@ class SaveHandlerPlugin
         if ($quote->getExtensionAttributes() && $quote->getExtensionAttributes()->getAwGiftcardCodes()) {
             $giftcards = $quote->getExtensionAttributes()->getAwGiftcardCodes();
             $this->saveGiftcards($giftcards);
-            $this->notifyAboutInvalidGiftcard($giftcards);
+            if ($quote->getData('aw_giftcard_flag_notified') !== null) {
+                $quote->setData('aw_giftcard_flag_notified', true);
+                $this->notifyAboutInvalidGiftcard($giftcards);
+            }
         }
         return $quote;
     }
